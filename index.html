<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>動画リスト</title>
<style>
body {
  background: linear-gradient(to bottom, #a8f0c6, #38b48b, #e0f7ff);
  font-family: Arial, sans-serif;
  padding: 20px;
  color: #000;
}
h1 {
  color: #fff;
  text-align: center;
  margin-bottom: 20px;
}
#searchInput {
  margin-bottom: 10px;
  padding: 5px;
  width: 250px;
  border: 1px solid #ccc;
  border-radius: 4px;
}
table {
  border-collapse: collapse;
  width: 100%;
  background-color: #fff;
}
th, td {
  border: 1px solid #ccc;
  padding: 6px 10px;
  text-align: left;
  word-break: break-word;
  white-space: normal;
}
th { background-color: #f4f4f4; }
#videoTable tbody tr:nth-child(odd) { background-color: #ffffff; }
#videoTable tbody tr:nth-child(even) { background-color: #ccffe5; }
tr:hover { background-color: #b3e5fc; }
a { color: #007bff; text-decoration: none; }
a:hover { text-decoration: underline; }
button {
  padding: 4px 8px;
  border: none;
  background-color: #38b48b;
  color: #fff;
  border-radius: 4px;
  cursor: pointer;
}
button:hover { background-color: #2e8b57; }
/* モーダル */
#modal {
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.5);
}
#modalContent {
  background:#fff;
  margin:10% auto;
  padding:20px;
  width:80%;
  max-width:500px;
  border-radius:8px;
  position: relative;
}
#modalClose {
  position:absolute;
  top:10px;
  right:10px;
  cursor:pointer;
  font-weight:bold;
}

/* 非表示セル（出演者検索用） */
.hidden-performers { display:none; }
/* YouTubeセルの幅制限 */
.youtube-link { max-width:180px; display:block; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
</style>
</head>
<body>

<h1>動画リスト</h1>
<input type="text" id="searchInput" placeholder="検索">

<table id="videoTable">
  <thead>
    <tr>
      <th>投稿日</th>
      <th>曲名</th>
      <th>ニコニコ</th>
      <th>YouTube</th>
      <th>詳細</th>
      <th class="hidden-performers">出演者(非表示)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div id="modal">
  <div id="modalContent">
    <span id="modalClose" onclick="document.getElementById('modal').style.display='none'">×</span>
    <div id="modalDetails"></div>
  </div>
</div>
<script>
fetch('data.json')
.then(res => res.json())
.then(data => {
  const tbody = document.querySelector('#videoTable tbody');
  data.forEach((item,index)=>{
    const tr = document.createElement('tr');
    // 出演者非表示セル（検索用）
    const hiddenPerformers = item["出演者"] ? item["出演者"].split('・').join(' ') : '';
    // ニコニコリンク
    const nicoLink = item["ニコニコ"]!=="－"?`<a href="${item["ニコニコ"]}" target="_blank">${item["ニコニコ"]}</a>`:"－";
    // YouTubeリンク
    let ytLink = "－";
    if(item["YouTube"] && item["YouTube"]!=="－") {
      let url = item["YouTube"].replace(/[\u200B-\u200D\uFEFF]/g,'').trim();
      if(!url.startsWith('http')) url='https://'+url;
      ytLink=`<a href="${url}" target="_blank" class="youtube-link">${url}</a>`;
    }
    tr.innerHTML = `
      <td>${item["投稿日"]}</td>
      <td>${item["曲名"]}</td>
      <td>${nicoLink}</td>
      <td>${ytLink}</td>
      <td><button onclick="showDetails(${index})">詳細</button></td>
      <td class="hidden-performers">${hiddenPerformers}</td>
    `;
    tbody.appendChild(tr);
  });

  window.showDetails=function(index){
    const item = data[index];
    // 本家様はオリジナル曲や－はリンク化しない
    let honke = item["本家様"];
    if(honke!=="－" && honke!=="オリジナル曲") honke=`<a href="${honke.trim()}" target="_blank">${honke}</a>`;
    document.getElementById('modalDetails').innerHTML=`
      <p><strong>イラスト:</strong> ${item["イラスト"]}</p>
      <p><strong>本家様:</strong> ${honke}</p>
      <p><strong>本家制作:</strong> ${item["本家制作"]}</p>
      <p><strong>今見れる？:</strong> ${item["今見れる？"]}</p>
      <p><strong>備考:</strong> ${item["備考"]}</p>
    `;
    document.getElementById('modal').style.display='block';
  }
  <script>
fetch('data.json')
.then(res => res.json())
.then(data => {
  const tbody = document.querySelector('#videoTable tbody');
  data.forEach((item,index)=>{
    const tr = document.createElement('tr');
    // 出演者非表示セル（検索用）
    const hiddenPerformers = item["出演者"] ? item["出演者"].split('・').join(' ') : '';
    // ニコニコリンク
    const nicoLink = item["ニコニコ"]!=="－"?`<a href="${item["ニコニコ"]}" target="_blank">${item["ニコニコ"]}</a>`:"－";
    // YouTubeリンク
    let ytLink = "－";
    if(item["YouTube"] && item["YouTube"]!=="－") {
      let url = item["YouTube"].replace(/[\u200B-\u200D\uFEFF]/g,'').trim();
      if(!url.startsWith('http')) url='https://'+url;
      ytLink=`<a href="${url}" target="_blank" class="youtube-link">${url}</a>`;
    }
    tr.innerHTML = `
      <td>${item["投稿日"]}</td>
      <td>${item["曲名"]}</td>
      <td>${nicoLink}</td>
      <td>${ytLink}</td>
      <td><button onclick="showDetails(${index})">詳細</button></td>
      <td class="hidden-performers">${hiddenPerformers}</td>
    `;
    tbody.appendChild(tr);
  });

  window.showDetails=function(index){
    const item = data[index];
    // 本家様はオリジナル曲や－はリンク化しない
    let honke = item["本家様"];
    if(honke!=="－" && honke!=="オリジナル曲") honke=`<a href="${honke.trim()}" target="_blank">${honke}</a>`;
    document.getElementById('modalDetails').innerHTML=`
      <p><strong>イラスト:</strong> ${item["イラスト"]}</p>
      <p><strong>本家様:</strong> ${honke}</p>
      <p><strong>本家制作:</strong> ${item["本家制作"]}</p>
      <p><strong>今見れる？:</strong> ${item["今見れる？"]}</p>
      <p><strong>備考:</strong> ${item["備考"]}</p>
    `;
    document.getElementById('modal').style.display='block';
  }
