<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>動画リスト</title>
<style>
body {
  background: linear-gradient(to bottom, #7ee0a5, #38b48b, #a0ffc0);
  font-family: Arial, sans-serif;
  padding: 20px;
  color: #000;
}

h1 { text-align:center; color:#fff; margin-bottom:20px; }

<html lang="ja">
<head>
<meta charset="UTF-8">
<title>動画リスト</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  color: #000;
  margin:0;
  /* 背景グラデーション 繰り返さない */
  background: linear-gradient(to bottom, #7ee0a5 0%, #38b48b 30%, #55c69b 60%, #ccffe5 100%);
  background-repeat: no-repeat;
  background-attachment: fixed;
}

h1 { text-align:center; color:#fff; margin-bottom:20px; }

#searchInput {
  margin-bottom:10px;
  padding:5px;
  width:250px;
  border:1px solid #ccc;
  border-radius:4px;
}

/* テーブル */
table {
  border-collapse: collapse;
  width: 100%;
  table-layout: auto;
  background-color: #fff;
  margin: 0 auto;
}

th, td {
  border: 1px solid #ccc;
  padding: 6px 10px;
  word-break: break-word;
  white-space: nowrap;
}

th { background-color: #f4f4f4; }

td.date, td.detail, td.nico, td.youtube {
  text-align: center;
  white-space: nowrap;
}

td.song {
  text-align: left;
  min-width: 200px;
  max-width: 50%;
}

tr:hover { background-color: #b3e5fc; }

a { color: #007bff; text-decoration: none; }
a:hover { text-decoration: underline; }

button {
  padding: 4px 8px;
  border: none;
  background-color: #38b48b;
  color: #fff;
  border-radius: 4px;
  cursor: pointer;
}
button:hover { background-color: #2e8b57; }

/* モーダル */
#modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5);}
#modalContent { background:#fff; margin:10% auto; padding:20px; width:80%; max-width:500px; border-radius:8px; position: relative; }
#modalClose { position:absolute; top:5px; right:5px; cursor:pointer; font-weight:bold; font-size:32px; }

/* レスポンシブ */
@media screen and (max-width:600px){
  td.song { max-width: 60%; }
  table, th, td { font-size:14px; }
}
</style>
</head>
<body>

<h1>動画リスト</h1>
<input id="searchInput" placeholder="検索...">

<table id="videoTable">
  <thead>
    <tr>
      <th>投稿日</th>
      <th class="song">曲名</th>
      <th>ニコニコ動画</th>
      <th>YouTube</th>
      <th>詳細</th>
      <th style="display:none;">検索用</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div id="modal">
  <div id="modalContent">
    <span id="modalClose" onclick="document.getElementById('modal').style.display='none'">&times;</span>
    <div id="modalDetails"></div>
  </div>
</div>

<script>
fetch('data.json')
.then(res => res.json())
.then(data => {
  const tbody = document.querySelector('#videoTable tbody');

  function renderTable(sortedData){
    tbody.innerHTML = '';
    sortedData.forEach((item,index)=>{
      let nicoLink = (item["ニコニコ"] && item["ニコニコ"]!=="－") ? `<a href="https://${item["ニコニコ"]}" target="_blank">▶ニコニコ動画</a>`:"－";
      let ytLink = (item["YouTube"] && item["YouTube"]!=="－") ? `<a href="${item["YouTube"]}" target="_blank">▶YouTube</a>`:"－";
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td class="date">${item["投稿日"]}</td>
        <td class="song">${item["曲名"]}</td>
        <td class="nico">${nicoLink}</td>
        <td class="youtube">${ytLink}</td>
        <td class="detail"><button onclick="showDetails(${index})">詳細</button></td>
        <td style="display:none;">${item["出演者"]} ${item["本家様"]} ${item["本家制作"]} ${item["今見れる？"]} ${item["備考"]}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  window.showDetails = function(index){
    const item = data[index];
    const mainLink = item["本家様"] && item["本家様"]!=="オリジナル曲" && item["本家様"]!=="？" ? `<a href="https://${item["本家様"]}" target="_blank">${item["本家様"]}</a>` : item["本家様"];
    document.getElementById('modalDetails').innerHTML = `
      <p><strong>歌唱者:</strong> ${item["出演者"]}</p>
      <p><strong>イラスト:</strong> ${item["イラスト"]}</p>
      <p><strong>本家様:</strong> ${mainLink}</p>
      <p><strong>創造神:</strong> ${item["本家制作"]}</p>
      <p><strong>今見れる？:</strong> ${item["今見れる？"]}</p>
      <p><strong>備考:</strong> ${item["備考"]}</p>
    `;
    document.getElementById('modal').style.display='block';
  }

  // モーダル外クリックで閉じる
  window.onclick = function(event){
    const modal = document.getElementById('modal');
    if(event.target === modal){ modal.style.display='none'; }
  }

  // 初回描画
  renderTable(data);

  // 検索機能
  document.getElementById('searchInput').addEventListener('input',function(){
    const filter = this.value.toLowerCase();
    document.querySelectorAll('#videoTable tbody tr').forEach(row=>{
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(filter) ? '' : 'none';
    });
  });

});
</script>
</body>
</html>
