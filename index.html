<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>動画リスト</title>
<style>
body {
  /* 上端は明るめの爽やか緑、下端は淡い水色寄りで偶数行と混ざらない */
  background: linear-gradient(to bottom, #8ef2a1, #dff8f0);
  font-family: Arial, sans-serif;
  padding: 20px;
  color: #000;
}
}

<script>
// 検索機能（トップページのみ対象）
document.getElementById('searchInput').addEventListener('input', function() {
  const filter = this.value.toLowerCase();
  const rows = document.querySelectorAll('#videoTable tbody tr');
  rows.forEach(row => {
    const text = row.textContent.toLowerCase();
    row.style.display = text.includes(filter) ? '' : 'none';
  });
});
</script>
h1 {
  color: #fff;
  text-align: center;
  margin-bottom: 20px;
}

#searchInput {
  margin-bottom: 10px;
  padding: 5px;
  width: 250px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

table {
  border-collapse: collapse;
  width: 100%;
  background-color: #fff;
}

th, td {
  border: 1px solid #ccc;
  padding: 6px 10px;
  text-align: left;
  word-break: break-word;
  white-space: normal;
}

th {
  background-color: #f4f4f4;
}

#videoTable tbody tr:nth-child(odd) { background-color: #ffffff; }
#videoTable tbody tr:nth-child(even) { background-color: #ccffe5; }

tr:hover { background-color: #b3e5fc; }
a { color: #007bff; text-decoration: none; }
a:hover { text-decoration: underline; }

button {
  padding: 4px 8px;
  border: none;
  background-color: #38b48b;
  color: #fff;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #2e8b57;
}

/* モーダル */
#modal {
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.5);
}

#modalContent {
  background:#fff;
  margin:10% auto;
  padding:20px;
  width:80%;
  max-width:500px;
  border-radius:8px;
  position: relative;
}

#modalClose {
  position:absolute;
  top:10px;
  right:10px;
  cursor:pointer;
  font-weight:bold;
}
</style>
</he<h1>動画リスト</h1>
<input type="text" id="searchInput" placeholder="検索...">

<table id="videoTable">
  <thead>
    <tr>
      <th>投稿日</th>
      <th>曲名</th>
      <th>ニコニコ</th>
      <th>YouTube</th>
      <th>詳細</th>
    </tr>
  </thead>
  <tbody>
    <!-- JSON から生成 -->
  </tbody>
</table>

<!-- モーダル -->
<div id="modal">
  <div id="modalContent">
    <span id="modalClose" onclick="document.getElementById('modal').style.display='none'">✖</span>
    <div id="modalDetails"></div>
  </div>
</div>

<script>
// data.json を読み込む
fetch('data.json')
  .then(res => res.json())
  .then(data => {
    const tbody = document.querySelector('#videoTable tbody');

    data.forEach((item, index) => {
      const tr = document.createElement('tr');

      // 出演者を「・」で分割してタグ化（表示はモーダルで）
      const performers = item["出演者"].split('・');
      const tagsHTML = performers.map(name => `<span class="tag">${name}</span>`).join(' ');

      tr.innerHTML = `
        <td>${item["投稿日"]}</td>
        <td>${item["曲名"]}</td>
        <td>${item["ニコニコ"] !== "－" ? `<a href="${item["ニコニコ"].trim()}" target="_blank">${item["ニコニコ"]}</a>` : "－"}</td>
        <td>${
          item["YouTube"] !== "－"
            ? `<a href="$
          {item["YouTube"].startsWith('http') ? item["YouTube"].trim() : 'https://' + item["YouTube"].trim()}" target="_blank">${item["YouTube"]}</a>`
            : "－"
        }</td>
        <td><button onclick="showDetails(${index})">詳細</button></td>
        <td class="hidden-performers">${performers.join(' ')}</td> <!-- 検索用非表示 -->
      `;

      tbody.appendChild(tr);
    });

    // モーダル表示関数
    window.showDetails = function(index) {
      const item = data[index];
      const performers = item["出演者"].split('・');

      document.getElementById('modalDetails').innerHTML = `
        <p><strong>出演者:</strong> ${performers.map(name => `<span class="tag">${name}</span>`).join(' ')}</p>

        <p><strong>イラスト:</strong> ${item["イラスト"]}</p>

        <p><strong>本家様:</strong> ${
          item["本家様"] !== "－" && item["本家様"] !== "オリジナル曲"
            ? `<a href="${item["本家様"].trim()}" target="_blank">${item["本家様"]}</a>`
            : item["本家様"]
        }</p>

        <p><strong>ニコニコ:</strong> ${
          item["ニコニコ"] !== "－"
            ? `<a href="${item["ニコニコ"].trim()}" target="_blank">${item["ニコニコ"]}</a>`
            : "－"
        }</p>

        <p><strong>YouTube:</strong> ${
          item["YouTube"] !== "－"
            ? `<a href="${item["YouTube"].startsWith('http') ? item["YouTube"].trim() : 'https://' + item["YouTube"].trim()}" target="_blank">${item["YouTube"]}</a>`
            : "－"
        }</p>

        <p><strong>本家制作:</strong> ${item["本家制作"]}</p>
        <p><strong>今見れる？:</strong> ${item["今見れる？"]}</p>
        <p><strong>備考:</strong> ${item["備考"]}</p>
      `;
      document.getElementById('modal').style.display = 'block';
    };

    // 検索機能（出演者も対象、非表示セル含む）
        document.getElementById('searchInput').addEventListener('input', function() {
      const filter = this.value.toLowerCase();
      const rows = document.querySelectorAll('#videoTable tbody tr');
      rows.forEach(row => {
        const text = row.textContent.toLowerCase(); // 非表示セルも含む
        row.style.display = text.includes(filter) ? '' : 'none';
      });
    });
  });
